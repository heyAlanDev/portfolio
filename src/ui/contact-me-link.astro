---
import Link from '@components/link.svelte'

interface Props {
  text: string
  as: 'link' | 'button'
  className?: string
  disabled?: boolean
}

const {
  text = 'Hire me',
  as = 'button',
  className,
  disabled,
  ...rest
} = Astro.props
---

<Link
  class={className}
  {text}
  {disabled}
  {as}
  {rest}
  to="#contact-form"
/>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const $contactMeLinks = document.querySelectorAll('[href="#contact-form"]')
    const $firstInput = document.querySelector(
      '#contact-form input#name'
    ) as HTMLInputElement

    if ($contactMeLinks === null) return
    $contactMeLinks.forEach(link => {
      link.addEventListener('click', e => {
        e.preventDefault()
        if ($firstInput === null) return
        $firstInput.focus()
      })
    })
  })
</script>
